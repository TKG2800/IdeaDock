## 1. はじめに
品質の高いソフトウェアを開発するためには、網羅性の高いテストケースを効率的に作成することが不可欠です。このドキュメントでは、テストケースの基本的な作り方と、管理しやすいように分割するための指針を示します。
## 2. テストケースの作り方
### 2.1. 要件を正確に理解する
- **目的**: 機能が何を実現しようとしているのかを明確に把握します。
- **方法**: **要件定義書、仕様書、ユーザーストーリー**を読み込み、不明点があれば**要件定義の作成者や関係者**に確認します。
### 2.2. テストの観点を洗い出す
テスト観点とは、テストの**着眼点や考え方**のことです。テスト観点を明確にすることで、**テストの抜け漏れを防ぎ、テストケースの作成意図を明確に**できます。以下の観点を中心に洗い出すことが重要です。
- **正常系**: 機能が期待通りに動作するパターン。
  - 例: 有効なユーザー名とパスワードでログインできる。
- **異常系**: 期待されない動作やエラーハンドリングを検証するパターン。
  - 例: 無効なパスワードでログインを試みると、エラーメッセージが表示される。
- **セキュリティ**: 不正アクセスや脆弱性への対策。
  - 例: 不正なSQL文を入力した場合にエラーとなるか。
- **パフォーマンス**: 応答時間や処理速度。
  - 例: 多数のユーザーが同時にアクセスした場合の応答速度。
- **UI/UX**: ユーザーインターフェースの使いやすさやレイアウト。
  - 例: 画面レイアウトの崩れがないか、ボタンはクリックしやすいか。
- **互換性**: 異なるOSやブラウザでの動作。
  - 例: Chrome, Firefox, Safariで正しく表示・動作するか。
### 2.3. テスト技法を活用する
テストケースの数をやみくもに増やすのではなく、効率的にバグを発見するためにテスト技法を活用します。
- **同値分割**: 同じような結果になる入力値をグループ（**同値クラス**）化し、その中から**代表的な値**を選んでテストします。これにより、テストケースの数を減らしつつ、網羅性を確保できます。
  - 例: 年齢入力で「20〜60歳」が有効な場合、「30歳」でテストする。
- **境界値分析**: 同値クラスの**境界となる値**とその**すぐ隣の値**をテストします。境界付近はバグが潜んでいる可能性が高いため、特に重点的にテストします。同値分割と組み合わせることで、より効果的に欠陥を見つけることができます。
  - 例: 「20〜60歳」が有効な場合、「19, 20, 60, 61歳」でテストする。
### 2.4. テストケースの要素を記述する
テストケースは、誰が見ても同じように実行できるように、具体的に記述することが大切です。曖昧な表現は避けましょう。
- **テストID**: 一意の識別子。
- **テスト項目**: テストの目的や概要。
- **前提条件**: テストを実行するために必要な状態やデータ。
- **テスト手順**: 具体的な操作手順。
- **期待結果**: テスト手順を実行した後に、システムが示すべき状態や表示。**定量的**に記述することで、主観的な判断を排除します。
  - 例: 「正しく表示される」ではなく、「ユーザーダッシュボード画面が表示される」と記述する。
- **実施結果**: テストを実施した結果（OK/NGなど）。
## 3. テストケースの分割方法
効率的なテスト管理のために、テストケースは適切な単位で分割します。
### 3.1. 機能・画面単位で分割する
最も基本的な分割方法です。テストケースの量が多い場合でも、機能や画面ごとにファイルを分けることで管理しやすくなります。
- 例: 「ログイン機能」「ユーザー登録画面」「商品一覧ページ」などでファイルを分割します。**CSVファイル**で管理する場合、`login.csv`, `user_profile.csv`のようにファイル名を機能単位で分けると分かりやすいです。
### 3.2. テストレベル・レイヤーで分割する
同じ機能でも、テストの目的やレベルによって分割することで、テストの役割を明確にできます。
- **単体テスト (Unit Test)**: プログラムの最小単位（関数、メソッドなど）を対象としたテスト。ビジネスロジックや計算処理の正しさを検証します。
- **結合テスト (Integration Test)**: 複数のコンポーネントやモジュールを組み合わせた際の動作を検証するテスト。コンポーネント間のインターフェースやデータの受け渡しに問題がないかを確認します。
- **システムテスト**: システム全体が要件通りに動作するかを総合的に検証するテスト。UI、ロジック、データベースなど、システム全体を通してユーザーシナリオをテストします。
- **E2E (End-to-End) テスト**: ユーザーの一連の操作をシミュレートし、システムの最初から最後までをテストします。
### 3.3. テストの独立性を保つ
各テストケースは、**他のテストケースに依存しないように作成**することが重要です。これにより、テストの順序に左右されず、テスト結果の一貫性を保てます。
- **理想的な状態**: 前提条件で必要なデータは、テストの開始時に準備し、終了時にクリーンアップ（テスト開始前の状態に戻す）します。
## 4. 命名規則
ファイル名やテストケース名は、内容が推測しやすいように**具体的かつ一貫性のある命名規則**を設けます。
- **ファイル名**: `feature_[機能名]_[観点].csv`
  - 例: `feature_login_normal.csv`, `feature_login_error.csv`
- **テストケース名**: `[テスト対象_条件_期待結果]`のように、目的と結果がわかるように記述します。
  - 例: `login_with_valid_credentials_success`, `login_with_invalid_password_shows_error_message`
### 例: `testCases.csv` の分割案
現在の `testCases.csv` は、複数の機能のテストケースが混在している可能性があります。これを以下のように分割することを推奨します。
- `login.csv`: ログイン・ログアウト機能に関するテストケース
- `user_profile.csv`: ユーザープロフィール表示・編集機能に関するテストケース
- `memo_creation.csv`: メモ作成機能に関するテストケース
このように分割することで、テストケースの管理が容易になり、特定の機能のテストを効率的に実行・修正できるようになります。
